{% extends 'base.html' %}

{% load common_tags %}

{% block title %}{{ report.case.organisation_name }} | Report publisher{% endblock %}

{% block content %}
<div class="govuk-width-container">
    <div class="govuk-breadcrumbs">
        <ol class="govuk-breadcrumbs__list">
            <li class="govuk-breadcrumbs__list-item">
                <a class="govuk-breadcrumbs__link" href="{% url 'dashboard:home' %}">Home</a>
            </li>
            <li class="govuk-breadcrumbs__list-item">
                <a class="govuk-breadcrumbs__link" href="{% url 'cases:case-detail' report.case.id %}">Case</a>
            </li>
            <li class="govuk-breadcrumbs__list-item">
                Report publisher
            </li>
        </ol>
    </div>
    <main id="main-content" class="govuk-main-wrapper no-padding-top">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                {% include "cases/helpers/edit_header.html" with page_heading='Report publisher' %}
            </div>
        </div>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <div class="govuk-button-group">
                    <a href="{% url 'reports:report-confirm-publish' report.id %}"
                        role="button"
                        draggable="false"
                        class="govuk-button"
                        data-module="govuk-button"
                    >
                        Publish HTML report
                    </a>
                    <a
                        href="{% url 'reports:report-detail' report.id %}"
                        role="button"
                        draggable="false"
                        class="govuk-button govuk-button--secondary"
                        data-module="govuk-button"
                    >
                        Edit report
                    </a>
                </div>
            </div>
        </div>
        {% if report.case.report_review_status == 'not-started' %}
            {% include 'reports/helpers/qa_process_notification.html' %}
        {% elif report.case.report_approved_status != 'yes' %}
            {% include 'reports/helpers/awaiting_approval_notification.html' %}
        {% endif %}
        {% if report.case.report_approved_status == 'yes' and not report.case.s3report_set.all %}
            {% include 'reports/helpers/publish_notification.html' %}
        {% endif %}
        {% if report.case.s3report_set.all %}
            {% include 'reports/helpers/s3_report_notification.html' %}
        {% endif %}
    </main>
    {% include 'reports/accessibility_report_container.html' %}
</div>
{% endblock %}
