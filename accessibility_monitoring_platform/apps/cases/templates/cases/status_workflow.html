{% extends 'common/case_form.html' %}

{% block preform %}
<h2 class="govuk-heading-s amp-margin-bottom-5">Status summary</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        Current status: {{ case.status.get_status_display }}
    </li>
    <li>
        Next required action: {% if case.archive %}
            Archived
        {% elif case.status.status == '010-unassigned-case' %}
            <a href="{% url 'cases:edit-case-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to case metadata
            </a>
        {% elif case.status.status == '020-test-in-progress' %}
            <a href="{% url 'cases:edit-test-results' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to testing details
            </a>
        {% elif case.status.status == '030-report-in-progress' %}
            <a href="{% url 'cases:edit-report-ready-for-qa' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to report ready for QA
            </a>
        {% elif case.status.status == '040-unassigned-qa-case' or case.status.status == '050-qa-in-progress' %}
            <a href="{% url 'cases:edit-qa-approval' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to QA approval
            </a>
        {% elif case.status.status == '060-report-ready-to-send' %}
            <a href="{% url 'cases:edit-report-sent-on' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to Report sent on
            </a>
        {% elif case.status.status == '070-in-report-correspondence' %}
            <a href="{{ case.in_report_correspondence_progress.url }}" class="govuk-link govuk-link--no-visited-state">
                {{ case.in_report_correspondence_progress.label }}
            </a>
        {% elif case.status.status == '080-in-probation-period' %}
            <a href="{% url 'cases:edit-12-week-update-requested' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to 12-week update requested
            </a>
        {% elif case.status.status == '090-in-12-week-correspondence' %}
            <a href="{{ case.twelve_week_correspondence_progress.url }}" class="govuk-link govuk-link--no-visited-state">
                {{ case.twelve_week_correspondence_progress.url }}
            </a>
        {% elif case.status.status == '100-reviewing-changes' %}
            <a href="{% url 'cases:edit-review-changes' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to reviewing changes
            </a>
        {% elif case.status.status == '110-final-decision-due' or case.status.status == '120-case-closed-waiting-to-be-sent' %}
            <a href="{% url 'cases:edit-case-close' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to closing the case
            </a>
        {% elif case.status.status == '130-case-closed-sent-to-equalities-body' or case.status.status == '140-in-correspondence-with-equalities-body' %}
            <a href="{% url 'cases:edit-equality-body-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to equality body metadata
            </a>
        {% elif case.status.status == '150-complete' %}
            <a href="{% url 'cases:edit-post-case' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to post case summary
            </a>
        {% else %}
            <a href="{% url 'cases:edit-case-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Go to case metadata
            </a>
        {% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Unassigned case {% if case.auditor %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-case-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Assign an auditor
        </a>
        {% if case.auditor %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Test in progress {% if case.status.farthest_status > '020-test-in-progress' %} [COMPLETE] {% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-test-results' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Initial website compliance decision is not filled in
        </a>
        {% if case.compliance.website_compliance_state_initial != 'not-known' %}&check;{% endif %}
    </li>
    <li>
        {% if case.audit %}
            <a href="{% url 'audits:edit-statement-overview' case.audit.id %}" class="govuk-link govuk-link--no-visited-state">
                Statement overview not filled in
            </a>
            {% if not case.statement_checks_still_initial %}&check;{% endif %}
        {% else %}
            <a href="{% url 'cases:edit-test-results' case.id %}" class="govuk-link govuk-link--no-visited-state">
                Initial accessibility statement decision is not filled in
            </a>
            {% if case.compliance.statement_compliance_state_initial != 'unknown' %}&check;{% endif %}
        {% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Report in progress {% if case.status.farthest_status > '030-report-in-progress' %} [COMPLETE] {% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-report-ready-for-qa' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Report ready for QA process needs to be Yes
        </a>
        {% if case.report_review_status == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">QA in progress {% if case.status.farthest_status > '050-qa-in-progress' %} [COMPLETE] {% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-qa-approval' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Report approved needs to be Yes
        </a>
        {% if case.report_approved_status == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Report ready to send {% if case.status.farthest_status > '060-report-ready-to-send' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-report-sent-on' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Report sent on requires a date
        </a>
        {% if case.report_sent_date %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Report sent {% if case.status.farthest_status > '070-in-report-correspondence' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-report-acknowledged' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Report acknowledged requires a date
        </a>
        {% if case.report_acknowledged_date %}&check;{% endif %}
    </li>
    <li>
        or <a href="{% url 'cases:edit-no-psb-response' case.id %}" class="govuk-link govuk-link--no-visited-state"> No response from PSB </a>
        {% if case.no_psb_contact == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Report acknowledged waiting for 12-week deadline {% if case.status.farthest_status > '080-in-probation-period' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-12-week-update-requested' case.id %}" class="govuk-link govuk-link--no-visited-state">
            12-week update requested requires a date
        </a>
        {% if case.twelve_week_update_requested_date %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">12-week update request acknowledged {% if case.status.farthest_status > '090-in-12-week-correspondence' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-12-week-update-request-ack' case.id %}" class="govuk-link govuk-link--no-visited-state">
            12-week update received requires a date or mark the case as having no response
        </a>
        {% if case.twelve_week_correspondence_acknowledged_date or case.no_psb_contact == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Reviewing changes {% if case.status.farthest_status > '100-reviewing-changes' %}[COMPLETE]{% endif %} </h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-review-changes' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Is this case ready for final decision? needs to be Yes
        </a>
        {% if case.is_ready_for_final_decision == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Final decision due {% if case.status.farthest_status > '110-final-decision-due' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-case-close' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Case completed requires a decision
        </a>
        {% if case.case_completed != 'no-decision' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Case closed and waiting to be sent to equalities body {% if case.status.farthest_status > '120-case-closed-waiting-to-be-sent' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-equality-body-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Date sent to equality body requires a date
        </a>
        {% if case.sent_to_enforcement_body_sent_date %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Case closed and sent to equalities body {% if case.status.farthest_status > '130-case-closed-sent-to-equalities-body' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-equality-body-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Equality body pursuing this case? should either be 'Yes, completed' or 'Yes, in progress'
        </a>
        {% if case.enforcement_body_closed_case != 'no' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">In correspondence with equalities body {% if case.status.farthest_status > '140-in-correspondence-with-equalities-body' %}[COMPLETE]{% endif %}</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-equality-body-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Equality body pursuing this case? should be 'Yes, completed'
        </a>
        {% if case.enforcement_body_closed_case == 'yes' %}&check;{% endif %}
    </li>
</ul>

<h2 class="govuk-heading-s amp-margin-bottom-5">Complete</h2>
<ul class="govuk-list govuk-list--bullet">
    <li>
        <a href="{% url 'cases:edit-case-close' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Case complete needs to be 'Case should not be sent to the equality body'
        </a>
        {% if case.case_close_complete_date %}&check;{% endif %}
    </li>
    <li>
        or
        <a href="{% url 'cases:edit-equality-body-metadata' case.id %}" class="govuk-link govuk-link--no-visited-state">
            Equality body pursuing this case? needs to be 'Yes, completed'
        </a>
        {% if case.enforcement_correspondence_complete_date %}&check;{% endif %}
    </li>
</ul>
{% endblock %}

{% block form %}
{% endblock %}
