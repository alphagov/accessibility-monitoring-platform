<!DOCTYPE html>

{% extends 'base.html' %}

{% block content %}

<div class="govuk-width-container">
    <a href="{% url 'cases:case-list' %}" class="govuk-back-link">Back</a>
    <main class="govuk-main-wrapper">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <h1 class="govuk-heading-xl">View case #{{ object.id }}</h1>
                <p class="govuk-body-l">{{ case.domain }}</p>
            </div>
        </div>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <h2 id="website-details" class="govuk-heading-m">Website details</h2>
                <table class="govuk-table">
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Date created</th>
                            <td class="govuk-table__cell">{{ case.created|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Status</th>
                            <td class="govuk-table__cell">{{ case.get_status_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header"">Auditor</th>
                            <td class="govuk-table__cell">{{ case.auditor }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header"">Test type</th>
                            <td class="govuk-table__cell">{{ case.get_test_type_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Full url</th>
                            <td class="govuk-table__cell">
                                <a href="{{ case.home_page_url }}" class="govuk-link">{{ case.home_page_url }}</a>
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Domain</th>
                            <td class="govuk-table__cell">{{ case.domain }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Application</th>
                            <td class="govuk-table__cell">{{ case.application }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Organisation name</th>
                            <td class="govuk-table__cell">{{ case.organisation_name }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Type of site</th>
                            <td class="govuk-table__cell">{{ case.get_website_type_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Sector</th>
                            <td class="govuk-table__cell">{{ case.sector }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Region</th>
                            <td class="govuk-table__cell">{{ case.region }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Case origin</th>
                            <td class="govuk-table__cell">{{ case.get_case_origin_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Zendesk link</th>
                            <td class="govuk-table__cell">
                                {% if case.zendesk_url %}
                                    <a href="{{ case.zendesk_url }}" class="govuk-link">{{ case.zendesk_url }}</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Trello ticket</th>
                            <td class="govuk-table__cell">
                                {% if case.trello_url %}
                                    <a href="{{ case.trello_url }}" class="govuk-link">{{ case.trello_url }}</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Notes</h3>
                                {% if case.notes %}<pre class="govuk-body-m">{{ case.notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Public sector body?</th>
                            <td class="govuk-table__cell">{{ case.is_public_sector_body }}</td>
                        </tr>
                    </tbody>
                </table>
                <h2 id="contact-details" class="govuk-heading-m">Contact details</h2>
                <table class="govuk-table">
                    <tbody class="govuk-table__body">
                        {% for contact in contacts %}
                        <tr class="govuk-table__row">
                            <td class="govuk-table__cell">
                                <div class="govuk-grid-row">
                                    <div class="govuk-grid-column-one-half">
                                        <h3 class="govuk-heading-s cases-sub-heading">Contact name</h3>
                                    </div>
                                    <div class="govuk-grid-column-one-half">
                                        <p class="govuk-body-m">{{ contact.name }}</p>
                                    </div>
                                </div>
                                <div class="govuk-grid-row">
                                    <div class="govuk-grid-column-one-half">
                                        <h3 class="govuk-heading-s cases-sub-heading">Job title</h3>
                                    </div>
                                    <div class="govuk-grid-column-one-half">
                                        <p class="govuk-body-m">{{ contact.job_title }}</p>
                                    </div>
                                </div>
                                <div class="govuk-grid-row">
                                    <div class="govuk-grid-column-one-half">
                                        <h3 class="govuk-heading-s cases-sub-heading">Contact detail</h3>
                                    </div>
                                    <div class="govuk-grid-column-one-half">
                                        <p class="govuk-body-m">{{ contact.detail }}</p>
                                    </div>
                                </div>
                                <div class="govuk-grid-row">
                                    <div class="govuk-grid-column-one-half">
                                        <h3 class="govuk-heading-s cases-sub-heading">Preferred contact</h3>
                                    </div>
                                    <div class="govuk-grid-column-one-half">
                                        <p class="govuk-body-m">{{ contact.preferred }}</p>
                                    </div>
                                </div>
                                <div class="govuk-grid-row">
                                    <div class="govuk-grid-column-full">
                                        <h3 class="govuk-heading-s cases-sub-heading">Notes</h3>
                                        {% if contact.notes %}<pre class="govuk-body-m">{{ contact.notes }}</pre>{% endif %}
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <h2 id="testing-details" class="govuk-heading-m">Testing details</h2>
                <table class="govuk-table">
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Link to test spreadsheet</th>
                            <td class="govuk-table__cell">
                                {% if case.test_results_url %}
                                    <a href="{{ case.test_results_url }}" >Monitor document</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Test status</th>
                            <td class="govuk-table__cell">{{ case.get_test_status_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Is the website compliant?</th>
                            <td class="govuk-table__cell">{{ case.is_website_compliant }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Compliance notes</h3>
                                {% if case.test_notes %}<pre class="govuk-body-m">{{ case.test_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                    </tbody>
                </table>
                <h2 id="report-details" class="govuk-heading-m">Report details</h2>
                <table class="govuk-table">
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Link to report draft</th>
                            <td class="govuk-table__cell">
                                {% if case.report_draft_url %}
                                    <a href="{{ case.report_draft_url }}">Report draft</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Report ready to be reviewed</th>
                            <td class="govuk-table__cell">{{ case.get_report_review_status_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">QA auditor</th>
                            <td class="govuk-table__cell">{{ case.reviewer }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Report approved</th>
                            <td class="govuk-table__cell">{{ case.get_report_approved_status_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">QA notes</h3>
                                {% if case.reviewer_notes %}<pre class="govuk-body-m">{{ case.reviewer_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Link to final report</th>
                            <td class="govuk-table__cell">
                                {% if case.report_final_url %}
                                    <a href="{{ case.report_final_url }}">Final draft</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Report sent on</th>
                            <td class="govuk-table__cell">{{ case.report_sent_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Report acknowledged</th>
                            <td class="govuk-table__cell">{{ case.report_acknowledged_date|date:"d/m/Y" }}</td>
                        </tr>
                    </tbody>
                </table>
                <h2 id="post-report" class="govuk-heading-m">Post report</h2>
                <table class="govuk-table">
                    <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Followup date</th>
                            <td class="govuk-table__cell">{{ case.week_12_followup_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Summary of progress made from public sector body</h3>
                                {% if case.psb_progress_notes %}<pre class="govuk-body-m">{{ case.psb_progress_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Followup email sent</th>
                            <td class="govuk-table__cell">{{ case.week_12_followup_email_sent_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Followup email acknowledged</th>
                            <td class="govuk-table__cell">{{ case.week_12_followup_email_acknowledgement_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Website retested?</th>
                            <td class="govuk-table__cell">{{ case.is_website_retested }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Disproportionate burden claimed?</th>
                            <td class="govuk-table__cell">{{ case.is_disproportionate_claimed }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Disproportionate burden notes</h3>
                                {% if case.disproportionate_notes %}<pre class="govuk-body-m">{{ case.disproportionate_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Accessibility statement decision</th>
                            <td class="govuk-table__cell">{{ case.get_accessibility_statement_decison_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Accessibility statement notes</h3>
                                {% if case.accessibility_statement_notes %}<pre class="govuk-body-m">{{ case.accessibility_statement_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">New accessibility statement</th>
                            <td class="govuk-table__cell">
                                {% if case.accessibility_statement_url %}
                                    <a href="{{ case.accessibility_statement_url }}">Accessibility statement</a>
                                {% endif %}
                            </td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Compliance decision</th>
                            <td class="govuk-table__cell">{{ case.get_compliance_decision_display }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <td colspan="2" class="govuk-table__cell">
                                <h3 class="govuk-heading-s cases-sub-heading">Compliance decision notes</h3>
                                {% if case.compliance_decision_notes %}<pre class="govuk-body-m">{{ case.compliance_decision_notes }}</pre>{% endif %}
                            </td>
                            <td class="govuk-table__cell"></td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Compliance email sent?</th>
                            <td class="govuk-table__cell">{{ case.compliance_email_sent_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Date sent to enforcement body</th>
                            <td class="govuk-table__cell">{{ case.sent_to_enforcement_body_sent_date|date:"d/m/Y" }}</td>
                        </tr>
                        <tr class="govuk-table__row">
                            <th scope="row" class="govuk-table__header">Case complete</th>
                            <td class="govuk-table__cell">{{ case.is_case_completed }}</td>
                        </tr>
                    </tbody>
                </table>
                <h2 id="unlist-case" class="govuk-heading-m">Unlist case</h2>
            </div>
            <div class="govuk-grid-column-one-third">
                <a href="{% url 'cases:edit-website-details' case.id %}" role="button" draggable="false" class="govuk-button" data-module="govuk-button">
                    Edit case
                </a>
                {% include 'cases/case_navbar.html' with current_page='view-details' %}
            </div>
        </div>
    </main>
</div>

{% endblock %}