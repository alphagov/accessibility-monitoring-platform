<!DOCTYPE html>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-half">
    {% if number_of_results %}
      <h2 class="govuk-heading-l">{{number_of_results}} test results found</h2>
    {% elif parameters %}
      <h2 class="govuk-heading-l">0 test results found</h2>
    {% endif %}
  </div>
  <div class="govuk-grid-column-one-half">
    {% if number_of_results %}
      <p class="govuk-body download-as-csv">
        <a 
          class="govuk-link"
          href="{{request.get_full_path }}&format=csv"
        >
          Download results as CSV
        </a>
      </p>
    {% endif %}
  </div>
</div>

{% if page_obj %}
  {% include "query_local_website_registry/pagination_controls.html" %}
  <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header">Domain</th>
        <th scope="col" class="govuk-table__header">Test Succeeded</th>
        <th scope="col" class="govuk-table__header">Tested</th>
        <th scope="col" class="govuk-table__header">URL</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for axe_header in page_obj %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{axe_header.domain_name|truncatechars:30}}</td>
          <td class="govuk-table__cell">{{axe_header.test_succeeded}}</td>
          <td class="govuk-table__cell">{{axe_header.test_timestamp|date:'d/m/Y'}}</td>
          <td class="govuk-table__cell">
            <a href="{{axe_header.url}}" >
              Link
            </a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% include "query_local_website_registry/pagination_controls.html" %}
{% endif %}
